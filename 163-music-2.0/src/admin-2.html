<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../src/css/default-2.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_852493_6tgskl7thzd.css">
    <title>管理页面2.0 </title>
</head>

<body>
    <section class="neteasemusic">

        <!-- 顶部个人信息展示区 -->

        <header class="top-bar">
            <div class="button"></div>
            <div class="logo"></div>
            <ul class="profile">
                <li><span class="iconfont icon-person"></span>王海铭</li>
                <li><span class="iconfont icon-phone"></span>17605339073</li>
                <li><span class="iconfont icon-github"></span><a href="https://github.com/weiyanqin">Github</a></li>
            </ul>
        </header>

        <!-- 用户交互区 -->

        <section class="interaction">
            <!-- 侧边歌曲列表栏 -->
            <aside class="aside-bar">
                <div class="song-list">
                    <ul></ul>
                </div>
                <div class="uploadArea">
                    <div id="uploadContainer" class="draggable">
                        <div id="uploadButton" class="clickable">
                            <span class="iconfont icon-add"></span>
                            新增歌曲
                        </div>
                    </div>
                </div>

            </aside>
            <!-- 用户操作面板 -->
            <main class="dashboard">
                <!-- 欢迎页面 -->
                <div class="welcome-page"></div>
                <!-- 查看音乐界面 -->
                <div class="info-page hide"></div>
                <!-- 编辑音乐页面 -->
                <div class="edit-page hide"></div>
                <!-- 上传歌曲页面 -->
                <div class="upload-page hide"></div>
            </main>
        </section>

    </section>

    <!-- <div id="siteLoading" class="site-loading"></div> -->

    <!-- <div id="uploadStatus"></div> -->
    <script src="../node_modules/leancloud-storage/dist/av-min.js"></script>
    <script src="../vendors/jquery-3.3.1.js"></script>
    <script src="../vendors/moxie.js"></script>
    <script src="../node_modules/plupload/js/plupload.min.js"></script>
    <script src="../node_modules/qiniu-js/dist/qiniu.min.js"></script>
    <script>
        var uploader = Qiniu.uploader({
            runtimes: 'html5', //上传模式,依次退化
            browse_button: 'uploadButton', //上传选择的点选按钮，**必需**
            uptoken_url: 'http://localhost:8888/uptoken',
            domain: 'pemeldjjy.bkt.clouddn.com', //bucket 域名，下载资源时用到，**必需**
            get_new_uptoken: false, //设置上传文件的时候是否每次都重新获取新的token
            max_file_size: '40mb', //最大文件体积限制
            dragdrop: true, //开启可拖曳上传
            drop_element: 'uploadContainer', //拖曳上传区域元素的ID，拖曳文件或文件夹后可触发上传
            auto_start: true, //选择文件后自动上传，若关闭需要自己绑定事件触发上传
            init: {
                'FilesAdded': (up, files) => {
                    plupload.each(files, function (file) {
                        // 文件添加进队列后,处理相关的事情
                    });
                },
                'BeforeUpload': (up, file) => {
                    // window.eventHub.emit('beforeUpload')
                    // if(this.model.data.status === 'closed'){
                    //     return false
                    // }else{
                    //     this.model.data.status === 'closed'
                    //     return true
                    // }
                    // 每个文件上传前,处理相关的事情
                },
                'UploadProgress': (up, file) => {
                    // 每个文件上传时,处理相关的事情
                    uploadStatus.textContent = '上传中'
                },
                //文件上传成功之后调用 FileUploaded
                'FileUploaded': (up, file, info) => {
                    uploadStatus.textContent = '上传完毕'

                    // window.eventHub.emit('afterUpload')
                    // this.model.data.status = 'open'
                    // var domain = up.getOption('domain');
                    // var response = JSON.parse(info.response);
                    // var sourceLink = 'http://' + domain + '/' + encodeURIComponent(response.key);
                    // window.eventHub.emit('new', {
                    //     url: sourceLink,
                    //     name: response.key
                    // })
                },
                'Error': function (up, err, errTip) {
                    //上传出错时,处理相关的事情
                },
                'UploadComplete': function () {
                    //队列文件处理完毕后,处理相关的事情
                },
            }
        })
    </script>
</body>

</html>